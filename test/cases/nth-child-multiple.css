.foo article:nth-child(1 of .not-hidden){
  grid-column: auto / span 8;
  grid-row: auto / span 3;
}

.foo article:nth-child(2 of .not-hidden){
  grid-column: auto / span 4;
  grid-row: auto / span 1;
}

.foo article:nth-child(3 of .not-hidden){
  grid-column: auto / span 4;
  grid-row: auto / span 1;
}

.foo article:nth-child(4 of .not-hidden){
  grid-column: auto / span 4;
  grid-row: auto / span 1;
}

.foo article:nth-child(n + 5 of .not-hidden){
  grid-column: auto / span 4;
  grid-row: auto / span 4;
}